<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click Tracker</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">-->

</head>
<body class="container-fluid">
    <div style="display:flex; justify-content: space-between; align-items: center;">
        <h1>Simple annotator</h1>
        <span style="padding: 3px; border: 1px solid black; visibility: hidden;">help</span>
        <span></span>
    </div>
    <div style="margin-bottom: 30px;">
        <form id="annotator_group" action="javascript:handleGroup()">
            <label for="groups">Select an annotator group</label>
            <select id="groups" name="groups">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <input type="submit" value="OK">
        </form>
    </div>
    <div style="display: flex; justify-content: space-between; align-items: center;" id="navbuttons">
        <span style="float: left;">
            <button id="undo" class="btn btn-outline-secondary">
                <img src="assets/undo-19-32.png" alt="undo" title="undo" style="width: 25px; height: 25px;">
            </button>
            <button id="redo" class="btn btn-outline-secondary">
                <img src="assets/redo-16-32.png" alt="redo" title="redo" style="width: 25px; height: 25px;">
            </button>
            <button id="clear" class="btn btn-outline-secondary">
                <img src="assets/clear-5-32.png" alt="clear" title="clear" style="width: 25px; height: 25px;">
            </button>
        </span>
        <span class="progress w-50" style="height: 30px;">
            <div></div>
            <div id="status1" class="progress-bar w-25" role="progressbar" style="font-size:15px;" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100">Select staff</div>
            <div id="status2" class="progress-bar bg-success w-25" role="progressbar" style="font-size:15px; visibility: hidden;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">Annotate notes</div>
            <div id="status3" class="progress-bar bg-info w-25" role="progressbar" style="font-size:15px; visibility: hidden;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">Annotate rests</div>
            <div id="status4" class="progress-bar w-25" role="progressbar" style="font-size:15px; visibility: hidden;">Annotate barlines</div>
            <div></div>
        </span>
        <span>
            <button id="done" class="btn btn-outline-secondary" style="float: right;">Done</button>
        </span>
    </div>
    <div style="display: flex; align-items: top; margin: 5px 5px 5px 0px;">
        <canvas id="clickCanvas" width="800" height="600"></canvas>
        <span id="help-display" style="padding-left: 30px; visibility: visible">The annotator works by annotating staffs individualy. <br>
            Start by clicking the top left corner of the current (topmost) staff you want to annotate and drag the mouse to the bottom right corrner of the staff to select it.
            Then input the staffs clef, sharps and flats and time signature. After that you can start annotating individual notes. <br>
            To annotate a note, click on the note and input the notes name and duration. If the note is a sharp or a flat, even if it is because of the key signature, input this into the note name (C#2, Gb4 etc).
            The move to the next step, press "Done". <br> Next, you can annotate rests. Simply click on the rests and input their duration. 
            Click "Done" do move to the final step, which is to anotate the barlines. <br> Click anywhere on a barline to annotate it. After clicking "Done" again, the data of the current staff will be saved and you can proceed to the next staff.
            After annotating all staffs, click save to save the annotation data and move to the next step.
            <br>
            <br>
            Note: all durations are written as the bottom part of their fraction, per example a quarter note would be duration 4, while a whole note would be duration 1.
        </span>
    </div>
    <div style="display: flex; justify-content: space-between; align-items: center;" id="databuttons">
        <span>
            <button id="prev" class="btn btn-outline-secondary">Previous image</button>
            <button id="next" class="btn btn-outline-secondary">Next image</button>
        </span>
        <span>
            <button id="save" class="btn btn-outline-secondary">
                <img src="assets/save-37-32.png" alt="save" title="save" style="width: 25px; height: 25px;">
            </button>
        </span>
    </div>
    <button id="post" class="btn btn-outline-secondary" style="visibility: hidden;">Post</button>
    <ul id="clicksList" style="visibility: hidden;"></ul>
    <script src="app.js"></script>
    <!--<script type="module" src="app.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>